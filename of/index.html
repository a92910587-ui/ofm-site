<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Nova Agency ‚Äî Candidature</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white">
  <!-- Hero -->
  <header class="text-center py-16">
    <img src="https://dummyimage.com/120x120/7aa2ff/ffffff&text=N" alt="Nova Agency" class="mx-auto mb-6 rounded-full shadow-lg">
    <h1 class="text-4xl md:text-5xl font-extrabold mb-4">Nova Agency</h1>
    <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">Onboarding, calendrier OF, DM management & reporting ‚Äî <strong>aucun appel requis</strong>. Rejoignez une agence qui fait passer votre OnlyFans au niveau sup√©rieur.</p>
  </header>

  <!-- Formulaire -->
  <main class="flex justify-center px-4">
    <div class="w-full max-w-xl bg-gray-800 rounded-2xl shadow-2xl p-8">
      <h2 class="text-2xl font-bold mb-6 text-center">Candidature Mod√®le</h2>
      <form id="applyForm" class="space-y-5" id="applyForm">
  <input type="text" name="website" style="position:absolute;left:-9999px;top:-9999px" tabindex="-1" autocomplete="off">
  <input type="hidden" name="utm_source"><input type="hidden" name="utm_medium"><input type="hidden" name="utm_campaign"><input type="hidden" name="utm_content"><input type="hidden" name="utm_term">
        <div>
          <label class="block mb-1 font-medium">Nom de sc√®ne</label>
          <input name="stage_name" type="text" required class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label class="block mb-1 font-medium">Email</label>
          <input name="email" type="email" required class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label class="block mb-1 font-medium">Liens r√©seaux (OF, IG, X)</label>
          <input name="links" type="text" required class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label class="block mb-1 font-medium">Revenu mensuel vis√© (‚Ç¨)</label>
          <input name="target" type="number" required class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-2 focus:ring-blue-500">
        </div>
        <div>
          <label class="block mb-1 font-medium">Message</label>
          <textarea name="message" rows="3" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:ring-2 focus:ring-blue-500"></textarea>
        </div>
        <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-3 px-4 rounded-lg transition">üöÄ Postuler maintenant</button>
      </form>
      <p class="text-sm text-gray-400 text-center mt-4">Apr√®s candidature, vous recevez les instructions <strong>par e-mail</strong>. Aucun appel.</p>
    </div>
  </main>

  <!-- Footer -->
  <footer class="mt-16 py-8 text-center text-gray-500 text-sm">
    ¬© Nova Agency ‚Äî Tous droits r√©serv√©s
  </footer>

  <script>
    document.getElementById("applyForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = {};
      formData.forEach((value, key) => { data[key] = value });
      data.ts = new Date().toISOString();
      data.source = "landing:of";

      await fetch("https://hook.eu2.make.com/tkth9qy4lg6lnco3bw63ovaefkxpu4dm", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      window.location.href = "thanks.html";
    });
  </script>
</body>
<script>
(function(){
  const f = document.getElementById('applyForm') || document.getElementById('f');
  if(!f) return;
  // Remplit UTM √† partir de l‚ÄôURL
  const p = new URLSearchParams(location.search);
  ['utm_source','utm_medium','utm_campaign','utm_content','utm_term'].forEach(k=>{
    if(f[k]) f[k].value = p.get(k) || '';
  });
  // D√©lai anti-bot (800ms)
  let readyAt = Date.now() + 800;
  // Hook existant
  const HOOK = (window.APP && window.APP.HOOK) || "https://hook.eu2.make.com/tkth9qy4lg6lnco3bw63ovaefkxpu4dm";
  const THANKS_URL = "thanks.html";

  const submitHandler = async (e)=>{
    e.preventDefault();
    if (f.website && f.website.value.trim() !== '') { return; } // bot d√©tect√©
    if (Date.now() < readyAt) { return; } // trop rapide ‚Üí probable bot
    const data = Object.fromEntries(new FormData(f).entries());
    data.ts = new Date().toISOString();
    data.source = 'landing:of';
    try {
      const r = await fetch(HOOK, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data)});
      if (r.ok) location.href = THANKS_URL;
      else alert('Erreur ('+r.status+'). R√©essayez.');
    } catch(e){ alert('Erreur r√©seau.'); }
  };

  // Remplace √©ventuel ancien listener
  f.addEventListener('submit', submitHandler);
})();
</script>
</body>
</html>
